<extend file="../basic/general.html"/>
<block name="body">

	<div class="edit_main" style="height: 100%;" oncontextmenu="return core.contextmenu();">
		<div class="tools">
			<div class="left">
				<!-- <div class="disable_mask"></div> -->
				<a class="toolMenu editMenuFile" href="javascript:;" draggable="false">{$Think.L.file}</a>
				<a class="toolMenu editMenuEdit" href="javascript:;" draggable="false">{$Think.L.edit}</a>
				<a class="toolMenu editMenuView" href="javascript:;" draggable="false">{$Think.L.view}</a>
				<a class="toolMenu editMenuTools" href="javascript:;" draggable="false">{$Think.L.tools}</a>
				<a class="toolMenu editMenuHelp" href="javascript:;" draggable="false">{$Think.L.help}</a>
			</div>
			<div class="right">
				<a action="close" href="javascript:;" title="{$Think.L.close}"><i class="font-icon icon-remove"></i></a>
				<a action="fullscreen" href="javascript:;" title="{$Think.L.full_screen}"><i class="font-icon icon-resize-full"></i></a>
			</div>
			<div style="clear:both"></div>
		</div><!-- end tools -->

		<!-- 主体部分 -->
		<div class="frame_left">
			<div class="edit_tab">
				<div class="tabs">
					<a  href="javascript:Editor.add()" class="add icon-plus"></a>
					<div style="clear:both"></div>
				</div>
			</div>
			<div class="edit_body">
				<div class="introduction">
					<?php include(LANGUAGE_PATH.LANGUAGE_TYPE.'/edit.html');?>
					<div style="clear:both"></div>
				</div>
				<div class="tabs"></div>
			</div>
		</div>
		<!-- 预览 -->
		<div class="frame_right">
			<div class="resize"></div>
			<div class="right_main">
				<div class="function_list" style="display:none;">
					<div class="function_list_tool">
						<div class="box">
							<span> <i class="icon-code"></i> {$Think.L.function_list}</span>
							<a action="close_preview" href="javascript:preview.close();"><i class="font-icon icon-remove"></i></a>
						</div>
					</div>
					<div class="function_list_parent">
						<div class="function_list_box"></div>
					</div>
				</div>
				<div class="preview" style="display:none;">
					<div class="preview_tool">
						<input type="text" value="" />
						<div class="box">
							<a action="refresh" href="javascript:preview.refresh();" title="{$Think.L.refresh}"><i class="font-icon icon-refresh"></i></a>
							<a action="open_ie" href="javascript:preview.openUrl();" target="_blank" title="{$Think.L.open_ie}"><i class="font-icon icon-globe"></i></a>
							<a action="close_preview" href="javascript:preview.close();" title="{$Think.L.close}"><i class="font-icon icon-remove"></i></a>
						</div>
					</div>
					<div class="preview_frame">
						<iframe src="" style="width:100%;height:100%;border:0;"></iframe>
					</div>
				</div>
			</div>
		</div>
	</div>
</block>
<block name="style">
	<link href="__PUBLIC__/css/skin/default/app_code_edit.css" rel="stylesheet" id='link_css_list'/>
</block>
<block name="script">

	<script src="__PUBLIC__/index.php?share/common_js&user={$Think.get.user}&sid={$Think.get.sid}"></script>
	<script src="__PUBLIC__/js/lib/seajs/sea.js"></script>
	<script src="__PUBLIC__/js/lib/ace/src-min-noconflict/ace.js"></script>
	<script src="__PUBLIC__/js/lib/ace/src-min-noconflict/ext-language_tools.js"></script>
	<script type="text/javascript">
		AUTH  = {'explorer:fileDownload':<?php echo $can_download;?>};
		G.frist_file = "<?php echo (isset($_GET['filename'])?$_GET['filename']:'') ;?>";
		G.user = "<?php echo $_GET['user}";
		G.sid = "<?php echo $_GET['sid}";
		G.code_config = <?php echo json_encode($editor_config);?>;
		G.code_theme_all = "{$Think.L.config.setting_all']['codethemeall']?>";
		G.theme = "<?php echo $config_theme;?>";
		seajs.config({
			base: "__PUBLIC__/js/",
			preload: ["lib/jquery-1.8.0.min"],
			map:[
				[ /^(.*\.(?:css|js))(.*)$/i,'$1$2?ver='+G.version]
			]
		});
		seajs.use("app/src/edit/main");
	</script>
</block>
